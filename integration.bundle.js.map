{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/layout/layout.tsx","webpack:///./src/components/utility/mountPoint/index.tsx","webpack:///./src/externals/management/idetificationKeyFactory.ts","webpack:///./src/externals/management/manageExternals.ts","webpack:///./src/index.tsx","webpack:///./src/routes/routeList.tsx","webpack:///./src/utils/loadjsWrapper.ts","webpack:///./src/utils/retistry/mountRegistry.ts","webpack:///./src/utils/styles/resetCss.ts","webpack:///./src/utils/urlResolver.ts"],"names":[],"mappings":"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","file":"integration.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"integration\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8001/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/index.tsx\",\"integration_vendor\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as React from 'react'\nimport styled from '@emotion/styled'\nimport { Link } from 'react-router-dom'\n\nconst Wrapper = styled.div({\n  display: 'flex'\n})\n\nconst SidebarArea = styled.div({\n  height: '100vh',\n  background: 'gray'\n})\n\nconst MainArea = styled.div({\n  flexGrow: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center'\n})\n\nconst FooterArea = styled.div({\n  marginTop: 'auto',\n  width: '100%',\n  background: 'gray'\n})\n\nconst DefaultLayout: React.FC<React.PropsWithChildren<{}>> = ({ children }) => {\n  return (\n    <Wrapper>\n      <SidebarArea>\n        <div>sidebar area</div>\n        <Link to=\"/\"> to top </Link>\n        <Link to=\"/next\"> to next </Link>\n      </SidebarArea>\n      <MainArea>\n        <div> {children} </div>\n        <FooterArea>footer area</FooterArea>\n      </MainArea>\n    </Wrapper>\n  )\n}\n\nexport default DefaultLayout\n","import * as React from 'react'\nimport { MicroIdetificationKey } from '../../../externals/management/idetificationKeyFactory'\nimport loadjsWrapper from '../../../utils/loadjsWrapper'\n\ninterface IProps {\n  microId: MicroIdetificationKey\n  type: 'micro' | 'custom'\n}\n\nclass MountPoint extends React.Component<IProps> {\n  private refEls: React.RefObject<HTMLDivElement>\n\n  private componentController: { mount: () => void; unmount: () => void }\n\n  constructor(props: Readonly<IProps>) {\n    super(props)\n    this.refEls = React.createRef<HTMLDivElement>()\n    this.componentController = { mount: () => {}, unmount: () => {} }\n  }\n\n  async componentDidMount() {\n    const { microId } = this.props\n    await loadjsWrapper.load(microId)\n    window.registry.whenDefined(microId.toId()).then(factory => {\n      if (this.refEls.current) {\n        this.componentController = factory(this.refEls.current)\n        this.componentController.mount()\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this.componentController.unmount()\n  }\n\n  render() {\n    const { microId } = this.props\n    return <div id={microId.toId()} ref={this.refEls} />\n  }\n}\n\nexport default MountPoint\n","import { MicroSegments } from './manageExternals'\n\nexport interface MicroIdetificationKey {\n  segment: MicroSegments\n  componentId: string\n  toId: () => string\n}\n\nconst idetificationKeyFactory = (\n  segment: MicroSegments,\n  componentId: string\n): MicroIdetificationKey => {\n  const key: MicroIdetificationKey = {\n    segment,\n    componentId,\n    toId: () => `${segment}-${componentId}`\n  }\n  return key\n}\n\nexport default idetificationKeyFactory\n","export type MicroSegments = 'integration' | 'sidebar'\n\nconst local: { key: MicroSegments; url: string }[] = [\n  { key: 'sidebar', url: 'http://localhost:8002' },\n  { key: 'integration', url: 'http://localhost:8001' }\n]\n\nconst ghPages: { key: MicroSegments; url: string }[] = [\n  { key: 'sidebar', url: 'https://savacan.github.io/demo-sidebar' },\n  {\n    key: 'integration',\n    url: 'https://savacan.github.io/demo-integration-layer'\n  }\n]\n\nexport { local, ghPages }\n","import * as React from 'react'\nimport * as ReactDom from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Global } from '@emotion/core'\nimport DefaultLayout from './components/layout/layout'\nimport RouteList from './routes/routeList'\nimport resetCss from './utils/styles/resetCss'\nimport initRegistry from './utils/retistry/mountRegistry'\n\ninitRegistry()\n\nconst Main: React.FC = (): JSX.Element => (\n  <BrowserRouter basename=\"/demo-integration-layer\">\n    <Global styles={resetCss} />\n    <DefaultLayout>\n      <RouteList />\n    </DefaultLayout>\n  </BrowserRouter>\n)\n\nReactDom.render(<Main />, document.getElementById('root'))\n","import * as React from 'react'\nimport { Route, Switch, RouteComponentProps, withRouter } from 'react-router'\nimport { History } from 'history'\nimport MountPoint from '../components/utility/mountPoint'\nimport idetificationKeyFactory from '../externals/management/idetificationKeyFactory'\n\ndeclare global {\n  interface Window {\n    context: { history: History }\n  }\n}\n\nclass RouteList extends React.Component<{} & RouteComponentProps<{}>> {\n  public constructor(props: Readonly<RouteComponentProps<{}>>) {\n    super(props)\n    const { history } = props\n    window.context = window.context ? window.context : { history }\n  }\n\n  public render() {\n    return (\n      <>\n        <Switch>\n          <Route path=\"/\" exact render={_props => <div>exact route</div>} />\n          <Route\n            path=\"/next\"\n            render={_props => (\n              <div>\n                <div>sidebar route</div>\n                <MountPoint\n                  microId={idetificationKeyFactory('sidebar', 'common')}\n                  type=\"micro\"\n                />\n              </div>\n            )}\n          />\n        </Switch>\n      </>\n    )\n  }\n}\n\nexport default withRouter(RouteList)\n","import loadjs from 'loadjs'\nimport URLResolver from './urlResolver'\nimport { MicroSegments } from '../externals/management/manageExternals'\nimport { MicroIdetificationKey } from '../externals/management/idetificationKeyFactory'\n\nconst toVenderString = (segment: MicroSegments): string =>\n  `${segment}_vendor.bundle.js`\nconst toComponentString = (componentId: string): string =>\n  `${componentId}.bundle.js`\n\n/**\n * manifest.jsonを使う場合ここでhashを処理。\n * vendorから並列ではなく同期で読み込ませる。\n */\nconst load = (idetificationKey: MicroIdetificationKey): Promise<unknown> => {\n  const { segment, componentId } = idetificationKey\n  const id = idetificationKey.toId()\n  const result = new Promise((resolve, reject) => {\n    const baseUrl = URLResolver(segment)\n    if (loadjs.isDefined(id)) resolve()\n    if (!baseUrl) {\n      const error = new Error(`segments ${segment} is undefined`)\n      reject(error)\n    } else {\n      loadjs(\n        [\n          `${baseUrl}/${toVenderString(segment)}`,\n          `${baseUrl}/${toComponentString(componentId)}`\n        ],\n        id,\n        {\n          async: false,\n          success() {\n            resolve()\n          },\n          error(err) {\n            reject(err)\n          }\n        }\n      )\n    }\n  })\n  return result\n}\n\nconst loadjsWrapper = {\n  load,\n  isDefined: (key: string) => loadjs.isDefined(key)\n}\n\nexport default loadjsWrapper\n","import { Registry, ComponentController } from './registryTypes'\n\n/**\n * customElementRegistryに近い形のレジストリをwindowにぶら下げることでマウントを行う。\n * 各コンポーネントはelementを受け取ってマウントする関数とアンマウントする関数を提供する（必要ない場合も関数を返す）。\n * idはsegment-componentId\n */\n\nclass MountRegistry implements Registry {\n  private willDefine: Map<\n    string,\n    {\n      promise: Promise<ComponentController>\n      resolver: (value: ComponentController) => void\n    }\n  >\n\n  private defined: Map<string, ComponentController>\n\n  constructor() {\n    this.willDefine = new Map<\n      string,\n      {\n        promise: Promise<ComponentController>\n        resolver: (value: ComponentController) => void\n      }\n    >()\n    this.defined = new Map<string, ComponentController>()\n  }\n\n  define(id: string, controller: ComponentController) {\n    this.defined.set(id, controller)\n    const will = this.willDefine.get(id)\n    if (will) {\n      will.resolver(controller)\n      this.willDefine.delete(id)\n    }\n  }\n\n  isDefined(id: string) {\n    return this.defined.has(id)\n  }\n\n  get(id: string) {\n    return this.defined.get(id)\n  }\n\n  whenDefined(id: string) {\n    const cont = this.get(id)\n    if (cont) return Promise.resolve(cont)\n    const will = this.willDefine.get(id)\n    if (will) return will.promise\n    // resolver定義前に呼ばれているというwarnで使えない……のでdummyを指定しておく。\n    let resolver: (value: ComponentController) => void = _value =>\n      console.log('miss setting resolver')\n    const promise = new Promise<ComponentController>((res, rej) => {\n      resolver = value => res(value)\n    })\n    this.willDefine.set(id, { promise, resolver })\n    return promise\n  }\n}\n\nconst initRegistry = () => {\n  const registry = new MountRegistry()\n  window.registry = registry\n}\n\nexport default initRegistry\n","import { css } from '@emotion/core'\n\nconst resetCss = css`\n  /* \nhtml5doctor.com Reset Stylesheet\nv1.6.1\nLast Updated: 2010-09-17\nAuthor: Richard Clark - http://richclarkdesign.com \nTwitter: @rich_clark\n*/\n\n  html,\n  body,\n  div,\n  span,\n  object,\n  iframe,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  blockquote,\n  pre,\n  abbr,\n  address,\n  cite,\n  code,\n  del,\n  dfn,\n  em,\n  img,\n  ins,\n  kbd,\n  q,\n  samp,\n  small,\n  strong,\n  sub,\n  sup,\n  var,\n  b,\n  i,\n  dl,\n  dt,\n  dd,\n  ol,\n  ul,\n  li,\n  fieldset,\n  form,\n  label,\n  legend,\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td,\n  article,\n  aside,\n  canvas,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section,\n  summary,\n  time,\n  mark,\n  audio,\n  video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    outline: 0;\n    font-size: 100%;\n    vertical-align: baseline;\n    background: transparent;\n  }\n\n  body {\n    line-height: 1;\n  }\n\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section {\n    display: block;\n  }\n\n  nav ul {\n    list-style: none;\n  }\n\n  blockquote,\n  q {\n    quotes: none;\n  }\n\n  blockquote:before,\n  blockquote:after,\n  q:before,\n  q:after {\n    content: '';\n    content: none;\n  }\n\n  a {\n    margin: 0;\n    padding: 0;\n    font-size: 100%;\n    vertical-align: baseline;\n    background: transparent;\n    /* text-decoration 無効化 */\n    text-decoration: none;\n    color: inherit;\n  }\n\n  /* change colours to suit your needs */\n  ins {\n    background-color: #ff9;\n    color: #000;\n    text-decoration: none;\n  }\n\n  /* change colours to suit your needs */\n  mark {\n    background-color: #ff9;\n    color: #000;\n    font-style: italic;\n    font-weight: bold;\n  }\n\n  del {\n    text-decoration: line-through;\n  }\n\n  abbr[title],\n  dfn[title] {\n    border-bottom: 1px dotted;\n    cursor: help;\n  }\n\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  /* change border colour to suit your needs */\n  hr {\n    display: block;\n    height: 1px;\n    border: 0;\n    border-top: 1px solid #cccccc;\n    margin: 1em 0;\n    padding: 0;\n  }\n\n  input,\n  select {\n    vertical-align: middle;\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n`\n\nexport default resetCss\n","import {\n  MicroSegments,\n  local,\n  ghPages\n} from '../externals/management/manageExternals'\n\n/**\n * のちのちdockerで起動したりWBS使ったりしてみる場合ここでhostnameを判別してurlを解決する。\n * 今回は一旦localhostでの起動のみを考慮する？→ghpagesでやってみる\n */\n\nconst hostSwithcer = (hostname: string) => {\n  if (hostname === 'localhost') return local\n  if (hostname === 'savacan.github.io') return ghPages\n  return null\n}\n\nconst URLResolver = (segment: MicroSegments): string | null => {\n  const { hostname } = window.location\n  console.log(hostname)\n  const urls = hostSwithcer(hostname)\n  if (urls === null) return null\n  const result = urls.find(e => e.key === segment)\n  if (!result) return null\n  return result.url\n}\n\nexport default URLResolver\n"],"sourceRoot":""}